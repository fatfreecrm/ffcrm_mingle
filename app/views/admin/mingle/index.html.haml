.title
  Mingle Settings

%p
  When you are viewing items in FFCRM MQL will be constructed using the details below (and the ID of the item you are viewing) in order to pull in a list of related Mingle cards.

%ul
  %li
    You must indicate valid fields for the type of card you are selecting (the fields you wish to display)
  %li
    The card type in Mingle must have the following custom fields to store a link back to the relevant FFCRM items: CRM Contact, CRM Organisation and CRM Opportunity

.list
  .remote
    = form_tag admin_mingle_index_path, :method => :put, :remote => true do
      .section
        %table
          %tr
            %td(colspan="3")
              .label.top.req Mingle API URL:
              = text_field_tag 'mingle[url]', @mingle[:url], :style => "width:500px"
          %tr
            %td
              .label.top.req Mingle user name:
              = text_field_tag 'mingle[username]', @mingle[:username], :style => "width:243px"
            %td= spacer
            %td
              .label.top.req Mingle password:
              = password_field_tag 'mingle[password]', @mingle[:password], :style => "width:243px"
          %tr
            %td
              .label.top.req Mingle projects:
              = text_field_tag 'mingle[projects]', @mingle[:projects], :style => "width:243px"
            %td= spacer
            %td
              .label.top.req Mingle card type:
              = text_field_tag 'mingle[card_type]', @mingle[:card_type], :style => "width:243px"
          %tr
            %td(colspan="3")
              .label.top.req Mingle fields to display in lists: (e.g. "number, name, status, owner")
              = text_field_tag 'mingle[fields]', @mingle[:fields], :style => "width:500px"

      .buttonbar
        = submit_tag 'Test', :name => :test
        = submit_tag 'Save configuration', :name => :save
        #{t :or}
        = link_to_cancel admin_mingle_index_path
